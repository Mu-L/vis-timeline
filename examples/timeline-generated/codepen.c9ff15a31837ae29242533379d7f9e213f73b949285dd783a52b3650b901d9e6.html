<html>
  <head>
    <meta charset="utf-8" />
    <title>Timeline | dataHandling | Data serialization</title>
  </head>
  <body>
    <form
      id="form"
      action="https://codepen.io/pen/define"
      method="post"
      target="_self"
    >
      <input
        type="hidden"
        name="data"
        value='{"css":"body,\nhtml {\n  font-family: arial, sans-serif;\n  font-size: 11pt;\n}\n\ntextarea {\n  width: 800px;\n  height: 200px;\n}\n\n.buttons {\n  margin: 20px 0;\n}\n\n.buttons input {\n  padding: 10px;\n}\n","css_external":"","html":"<h1>Serialization and deserialization</h1>\n\n<p>\n  This example shows how to serialize and deserialize JSON data, and load this\n  in the Timeline via a DataSet. Serialization and deserialization is needed\n  when loading or saving data from a server.\n</p>\n\n<textarea id=\"data\">\n[\n  {\n    \"id\": 1,\n    \"content\": \"item 1\",\n    \"start\": \"2014-01-01T01:00:00\"\n  },\n  {\n    \"id\": 2,\n    \"content\": \"item 2\",\n    \"start\": \"2014-01-01T02:00:00\"\n  },\n  {\n    \"id\": 3,\n    \"content\": \"item 3\",\n    \"start\": \"2014-01-01T03:00:00\"\n  },\n  {\n    \"id\": 4,\n    \"content\": \"item 4\",\n    \"start\": \"2014-01-01T04:00:00\",\n    \"end\": \"2014-01-01T04:30:00\"\n  },\n  {\n    \"id\": 5,\n    \"content\": \"item 5\",\n    \"start\": \"2014-01-01T05:00:00\",\n    \"type\": \"point\"\n  },\n  {\n    \"id\": 6,\n    \"content\": \"item 6\",\n    \"start\": \"2014-01-01T06:00:00\"\n  }\n]\n</textarea>\n\n<div class=\"buttons\">\n  <input\n    type=\"button\"\n    id=\"load\"\n    value=\"↓ Load\"\n    title=\"Load data from textarea into the Timeline\"\n  />\n  <input\n    type=\"button\"\n    id=\"save\"\n    value=\"↑ Save\"\n    title=\"Save data from the Timeline into the textarea\"\n  />\n</div>\n\n<div id=\"visualization\"></div>\n","js":"var txtData = document.getElementById(\"data\");\nvar btnLoad = document.getElementById(\"load\");\nvar btnSave = document.getElementById(\"save\");\n\n// Create an empty DataSet.\n// This DataSet is used for two way data binding with the Timeline.\nvar items = new vis.DataSet();\n\n// create a timeline\nvar container = document.getElementById(\"visualization\");\nvar options = {\n  editable: true,\n};\nvar timeline = new vis.Timeline(container, items, options);\n\nfunction loadData() {\n  // get and deserialize the data\n  var data = JSON.parse(txtData.value);\n\n  // update the data in the DataSet\n  //\n  // Note: when retrieving updated data from a server instead of a complete\n  // new set of data, one can simply update the existing data like:\n  //\n  //   items.update(data);\n  //\n  // Existing items will then be updated, and new items will be added.\n  items.clear();\n  items.add(data);\n\n  // adjust the timeline window such that we see the loaded data\n  timeline.fit();\n}\nbtnLoad.onclick = loadData;\n\nfunction saveData() {\n  // get the data from the DataSet\n  //\n  // Note that we specify the output type of the fields start and end\n  // as \"ISODate\", which is safely serializable. Other serializable types\n  // are \"Number\" (unix timestamp), \"ASPDate\" or \"String\" (without timezone!).\n  //\n  // Alternatively, it is possible to configure the DataSet to convert\n  // the output automatically to ISODates like:\n  //\n  //   var options = {\n  //     type: {start: &apos;ISODate&apos;, end: &apos;ISODate&apos;}\n  //   };\n  //   var items = new vis.DataSet(options);\n  //   // now items.get() will automatically convert start and end to ISO dates.\n  //\n  var data = items.get({\n    type: {\n      start: \"ISODate\",\n      end: \"ISODate\",\n    },\n  });\n\n  // serialize the data and put it in the textarea\n  txtData.value = JSON.stringify(data, null, 2);\n}\nbtnSave.onclick = saveData;\n\n// load the initial data\nloadData();\n","js_external":"https://visjs.github.io/vis-timeline/standalone/umd/vis-timeline-graph2d.min.js","title":"Timeline | dataHandling | Data serialization"}'
      />
      <button id="open" alt="JSFiddle" title="JSFiddle">Open CodePen</button>
    </form>

    <script type="text/javascript">
      document.getElementById("open").click();
    </script>
  </body>
</html>
